 <div {{ attributes }}>
     <div class="stats shadow">

         <div class="stat" >
             <div class="stat-figure text-secondary">
                 <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
             </div>
             {% set sum = 0 %} {# Initialize the sum variable #}
             {% for revenue in computed.TotalRevenuePerPlan %}
                 {% set sum = sum + revenue.totalRevenue %} {# Calculate the sum #}
             {% endfor %}
             <div class="stat-title">Balance</div>
             <div class="stat-value">{{ sum }} TND</div>
             <div class="stat-desc">Jan 1st - Dec 31</div>
         </div>
         <div class="stat">
             <div class="stat-figure text-secondary">
                 <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>
             </div>
             <div class="stat-title">Active Users</div>
             <div class="stat-value">{{ TotalActiveSubscribers }}</div>
             <div class="stat-desc"> {{ ActiveUsersPercentage }}%↗︎ </div>
         </div>

         <div class="stat">
             <div class="stat-figure text-secondary">
                 <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path></svg>
             </div>
             <div class="stat-title">Canceling Clients </div>
             <div class="stat-value">{{ getTotalCancelingSubscribers }}</div>
             <div class="stat-desc">↘︎ {{ CancelingUsersPercentage }}%</div>
         </div>

     </div>
     <div class="flex justify-between">
         <div class="w-1/2 mr-4">
             {{ render_chart(computed.chart) }}
         </div>
         <div class="w-1/2">
             {{ render_chart(computed.PieChart) }}
         </div>
     </div>


 <details class="collapse bg-base-200">
     <summary class="collapse-title text-xl font-medium"> Total revenue generated from each plan since the beginning of the current year </summary>
     <div class="collapse-content">
         {% for revenue in computed.TotalRevenuePerPlan %}
             <h2> Revenue  for {{ revenue.plan }} = {{ revenue.totalRevenue }}TND</h2>
         {% endfor %}
     </div>
 </details>
<div class="collapse bg-base-100/10">
    <input type="radio" name="my-accordion-1" checked="checked" />
    <div class="collapse-title text-xl font-medium">
        Plan with the most Active Subscribers
    </div>
    <div class="collapse-content">
        {{ planWithMostSubscribers.plan }} ==> {{ planWithMostSubscribers.count }} subscriber(s)
        {% if planWithMostSubscribers.cost is defined and planWithMostSubscribers.count is defined %}
            Total Revenue: {{ planWithMostSubscribers.cost * planWithMostSubscribers.count }}TND
        {% endif %}

    </div>
</div>
<div class="collapse bg-base-100/10">
    <input type="radio" name="my-accordion-1" />
    <div class="collapse-title text-xl font-medium">
        Plan with the most Canceled Status
    </div>
    <div class="collapse-content">
        <p>{{ planWithMostCanceledStatus.plan }} ==> {{ planWithMostCanceledStatus.count }} subscriber(s)</p>
    </div>
</div>
<div class="collapse bg-base-100/10">
    <input type="radio" name="my-accordion-1" />
    <div class="collapse-title text-xl font-medium">
        Plan with the most unsatisfied clients
    </div>
    <div class="collapse-content">
        <p>{{ planWithMostCancelingStatus.plan }} ==> {{ planWithMostCancelingStatus.count }}  subscriber(s)</p>
    </div>
</div>